!async function(){const t=document.currentScript,e=t.getAttribute("src").split("/Modules")[0],n={fabBgColor:t.getAttribute("data-fab-bg-color")||"#9163DD",fabIcon:t.getAttribute("data-fab-icon")||`${e}/Modules/Chatbot/images/img-robot-face.png`,iframeSrc:t.getAttribute("data-iframe-src")||"",iframeWidth:t.getAttribute("data-iframe-width")||375,iframeHeight:t.getAttribute("data-iframe-height")||532},i=n.iframeSrc.split("chatbot_code=")[1]?.split("/")[0],a=await(async()=>{if(i)try{const t=await fetch(`${e}/api/v2/visitor/widget/chatbots/details/${i}`),a=await t.json(),o=a?.data||{};return n.fabBgColor=o?.meta?.theme_color||n.fabBgColor,n.fabIcon=o?.meta?.floating_image?.url||n.fabIcon,o}catch(t){return console.error("Failed to fetch chatbot details:",t),null}return null})();if(!n.iframeSrc)return void console.error("Iframe source is not set");const o=`\n <div class="techvill-widget-fab-container">\n <button id="techvill-widget-fab" class="techvill-widget-fab-button" style="background-color: ${n.fabBgColor}; display: ${"Active"===a?.status?"flex":"none"};">\n <img src="${n.fabIcon}" alt="open" class="techvill-widget-fab-icon" />\n </button>\n </div>\n <div id="techvill-widget-chat-modal" class="techvill-widget-chat-modal">\n <div class="techvill-widget-chat-body">\n ${n.iframeSrc?`\n <iframe \n src="${n.iframeSrc}"\n width="${n.iframeWidth}"\n height="${n.iframeHeight}"\n title="Techvillage support chat"\n frameborder="0"\n allowfullscreen\n allowtransparency\n id="techvill-widget-iframe"\n onload="window.parent.postMessage('techvill-widget-iframe-loaded', '*')"\n name="techvill-widget-iframe"\n crossOrigin="anonymous"\n ></iframe>`:'\n <div class="techvill-widget-notfound-iframe">\n <h1>Chat widget</h1>\n <p>iframe source is not set</p>\n </div>'}\n </div>\n </div>\n `,l=document.createElement("style");l.textContent="\n body {\n margin: 0;\n padding: 0;\n font-family: Arial, sans-serif;\n }\n .techvill-widget-fab-container {\n position: fixed;\n bottom: 20px;\n right: 21px;\n z-index: 1500;\n }\n .techvill-widget-fab-button {\n position: relative;\n flex-shrink: 0;\n display: flex;\n justify-content: center;\n align-items: center;\n width: 80px;\n height: 80px;\n border-radius: 50%;\n color: #fff;\n border: none;\n cursor: pointer;\n box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);\n transition: all 0.1s ease-in-out;\n }\n .techvill-widget-fab-icon {\n height: 80px;\n width: 80px;\n border-radius: 50%;\n object-fit: fill;\n }\n .techvill-widget-chat-modal {\n visibility: hidden;\n opacity: 0;\n position: fixed;\n bottom: 70px;\n right: 21px;\n background-color: #fff;\n z-index: 1000;\n border-radius: 10px;\n overflow: hidden;\n box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3); \n transition: all 0.2s ease-in-out;\n }\n .techvill-widget-notfound-iframe {\n min-height: 532px;\n height: 100%;\n display: flex;\n flex-direction: column;\n justify-content: center;\n align-items: center;\n }\n .techvill-widget-notfound-iframe p {\n margin: 0;\n padding: 0;\n color: #000;\n }\n ",document.body.insertAdjacentHTML("beforeend",o),document.head.appendChild(l);let r=!0;const d=document.getElementById("techvill-widget-fab");d.addEventListener("click",(()=>{const t=document.getElementById("techvill-widget-chat-modal");r?(t.style.visibility="visible",t.style.bottom="110px",t.style.opacity="1",d.innerHTML='\n <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n <path fill-rule="evenodd" clip-rule="evenodd" d="M0.536971 0.536971C1.25293 -0.17899 2.41373 -0.17899 3.1297 0.536971L11 8.40728L18.8703 0.536971C19.5863 -0.17899 20.7471 -0.17899 21.463 0.536971C22.179 1.25293 22.179 2.41373 21.463 3.1297L13.5927 11L21.463 18.8703C22.179 19.5863 22.179 20.7471 21.463 21.463C20.7471 22.179 19.5863 22.179 18.8703 21.463L11 13.5927L3.1297 21.463C2.41373 22.179 1.25293 22.179 0.536971 21.463C-0.17899 20.7471 -0.17899 19.5863 0.536971 18.8703L8.40728 11L0.536971 3.1297C-0.17899 2.41373 -0.17899 1.25293 0.536971 0.536971Z" fill="white"/>\n </svg>',d.style.transform="rotate(90deg)"):(t.style.visibility="hidden",t.style.bottom="70px",t.style.opacity="0",d.innerHTML=`<img src="${n.fabIcon}" alt="open" class="techvill-widget-fab-icon"/>`,d.style.transform="rotate(0deg)"),d.style.transition="all 0.2s ease-in-out",r=!r}))}();