"use strict";function hideProviderOptions(){$(".ProviderOptions").each((function(){$(this).addClass("hidden")}))}function resetAll(){const fileInput=$("#file_input"),description=$("#detector_description");fileInput.val(""),fileInput.prop("disabled",!1),fileInput.attr("required",!0),description.attr("required",!0),description.prop("disabled",!1)}function updateProgressBar(percentage){$(".ai-detector-graph").each((function(){var $bar=$(this).find(".progress-bars"),$val=$(this).find(".percentage-value"),perc=percentage;$({p:0}).animate({p:perc},{duration:1500,easing:"swing",step:function(p){var progressValue=0|p;$bar.css({transform:"rotate("+1.8*progressValue+"deg)"}),$val.text(progressValue+"%")}})}))}function displayReadableData(data){const $reportDiv=$(".data-append"),$itemDiv=$("<div>").css("margin-bottom","20px");$itemDiv.html(`\n        <p><strong>${jsLang("Conclusion:")}</strong> ${data}</p>\n        <hr>\n    `),$reportDiv.append($itemDiv)}$(".AdavanceOption").on("click",(function(){"hidden"==$("#ProviderOptionDiv").attr("class")?(hideProviderOptions(),$("."+$("#provider option:selected").val()+"_div").removeClass("hidden"),$("#ProviderOptionDiv").removeClass("hidden")):$("#ProviderOptionDiv").addClass("hidden")})),$("#provider").on("change",(function(){hideProviderOptions(),$("."+$(this).val()+"_div").removeClass("hidden")})),$("#provider").on("change",(function(){hideProviderOptions(),$("."+$(this).val()+"_div").removeClass("hidden")})),$(document).on("submit","#detector-form",(function(e){let dataArray;e.preventDefault(),$(".loader").removeClass("hidden");var providerObject=$(this).serializeArray().find((function(element){return"provider"===element.name})),providerValue=providerObject?providerObject.value:null;let data=new FormData;var description=$("#detector_description").val();description&&data.append("text",filterXSS(description.trim())),data.append("provider",providerValue);var fileInput=$("#file_input")[0];fileInput&&fileInput.files.length>0&&data.append("file",fileInput.files[0]),data.append("dataType","json"),data.append("_token",CSRF_TOKEN),$.ajax({url:SITE_URL+PROMT_URL,type:"POST",beforeSend:function(xhr){updateProgressBar(0),$(".percentage-wrapper .percentage").text(0),$(".data-append").text(""),$(".loader").removeClass("hidden"),$("#detector-creation").attr("disabled","disabled"),xhr.setRequestHeader("Authorization","Bearer "+ACCESS_TOKEN)},data:data,contentType:!1,cache:!1,processData:!1,success:function(response){0===parseInt(response.data.percent)?($(".bar-inner").addClass("bar-green-inner").removeClass("bar-inner"),updateProgressBar(100),$(".percentage-wrapper .percentage").text(100)):($(".percentage-wrapper .percentage").text(response.data.percent),updateProgressBar(response.data.percent),displayReadableData(response.data.report_data));var credit=$(".total-page-left");if(credit.length>0){var creditValue=parseFloat(credit.text());if(!isNaN(creditValue)&&null!=response.data.pages){var pages=creditValue-response.data.pages;pages<0&&(pages=0),credit.text(pages)}}toastMixin.fire({title:jsLang("Ai Detector Report generated successfully."),icon:"success"})},complete:()=>{$(".loader").addClass("hidden"),$("#detector-creation").removeAttr("disabled")},error:function(response){var jsonData=JSON.parse(response.responseText),message=jsonData.error?jsonData.error:jsonData.message;errorMessage(message,"detector-creation")}})})),$("#file_input").on("change",(function(){const fileInput=$(this),description=$("#detector_description");fileInput.val()?(description.prop("disabled",!0),description.removeAttr("style"),description.attr("required",!1),description.parent().find(".error").remove(),description.parent().removeClass("has-validation-error")):(description.prop("disabled",!1),description.attr("required","required"))})),$("#detector_description").on("keyup",(function(){const description=$(this),fileInput=$("#file_input");""!==description.val().trim()?(fileInput.prop("disabled",!0),fileInput.removeAttr("style"),fileInput.attr("required",!1)):(fileInput.prop("disabled",!1),fileInput.attr("required",!0))})),$(document).ready((function(){updateProgressBar(0)}));