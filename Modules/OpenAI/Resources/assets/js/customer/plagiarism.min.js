"use strict";function hideProviderOptions(){$(".ProviderOptions").each((function(){$(this).addClass("hidden")}))}function updateProgressBar(percentage){$(".ai-plagiarism-graph").each((function(){var $bar=$(this).find(".progress-bars"),$val=$(this).find(".percentage-value"),perc=percentage;$({p:0}).animate({p:perc},{duration:1500,easing:"swing",step:function(p){var progressValue=0|p;$bar.css({transform:"rotate("+1.8*progressValue+"deg)"}),$val.text(progressValue+"%")}})}))}function displayReadableData(jsonData){const $reportDiv=$(".data-append"),data=JSON.parse(jsonData);data.forEach(item=>{const $itemDiv=$("<div>").css("margin-bottom","20px");$itemDiv.html(`\n        <p><strong>${jsLang("Source:")}</strong> <a href="${item.source}" target="_blank">${item.link.name}</a></p>\n        <p><strong>${jsLang("Content Type:")}</strong> ${item.content_type}</p>\n        <p><strong>${jsLang("Plagiarism Detected:")}</strong> ${item.plagiarism_percent}%</p>\n        <p><strong>${jsLang("Plagiarized Content Length:")}</strong> ${item.plagiarism_length} ${jsLang("characters")} </p>\n        <hr>\n      `),$reportDiv.append($itemDiv)})}$(".AdavanceOption").on("click",(function(){"hidden"==$("#ProviderOptionDiv").attr("class")?(hideProviderOptions(),$("."+$("#provider option:selected").val()+"_div").removeClass("hidden"),$("#ProviderOptionDiv").removeClass("hidden")):$("#ProviderOptionDiv").addClass("hidden")})),$("#provider").on("change",(function(){hideProviderOptions(),$("."+$(this).val()+"_div").removeClass("hidden")})),$("#provider").on("change",(function(){hideProviderOptions(),$("."+$(this).val()+"_div").removeClass("hidden")})),$(document).on("submit","#plagiarism-form",(function(e){$(".loader").removeClass("hidden");let dataArray=$(this).serializeArray();var providerObject=dataArray.find((function(element){return"provider"===element.name}));function getValueByName(name){var item=dataArray.find((function(element){return element.name===name}));return item?item.value:null}var providerValue=providerObject?providerObject.value:null;e.preventDefault(),$.ajax({url:SITE_URL+PROMT_URL,type:"POST",beforeSend:function(xhr){updateProgressBar(0),$(".data-append").text(""),$(".loader").removeClass("hidden"),$("#plagiarism-creation").attr("disabled","disabled"),xhr.setRequestHeader("Authorization","Bearer "+ACCESS_TOKEN)},data:{text:filterXSS($("#plagiarism-description").val()),provider:providerValue,dataType:"json",_token:CSRF_TOKEN},success:function(response){0===parseInt(response.data.percent)?($(".bar-inner").addClass("bar-green-inner").removeClass("bar-inner"),updateProgressBar(100),$(".percentage-wrapper .percentage").text(response.data.percent)):($(".percentage-wrapper .percentage").text(response.data.percent),updateProgressBar(response.data.percent),displayReadableData(response.data.report_data));var credit=$(".total-page-left");if(credit.length>0){var creditValue=parseFloat(credit.text());if(!isNaN(creditValue)&&null!=response.data.pages){var pages=creditValue-response.data.pages;pages<0&&(pages=0),credit.text(pages)}}toastMixin.fire({title:jsLang("Plagiarism generated successfully."),icon:"success"})},complete:()=>{$(".loader").addClass("hidden"),$("#plagiarism-creation").removeAttr("disabled")},error:function(response){var jsonData=JSON.parse(response.responseText),message=jsonData.error?jsonData.error:jsonData.message;errorMessage(message,"plagiarism-creation")}})})),$(document).ready((function(){updateProgressBar(0)}));